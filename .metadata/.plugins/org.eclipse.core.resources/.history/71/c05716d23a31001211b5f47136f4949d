<?php
/**
 * @file
 * Contains all related outcomes resource entity functions.
 * Entity views are found here.
 */

/**
 * Save a Resource.
 *
 * @param object $entity
 *   Resource entity
 */
function lti_tool_provider_outcomes_resource_save(&$entity) {
  return entity_get_controller('lti_tool_provider_outcomes_resource')->save($entity);
}

/**
 * Delete A Resource.
 *
 * @param object $entity
 *   Resource entity
 */
function lti_tool_provider_outcomes_resource_delete($entity) {
  entity_get_controller('lti_tool_provider_outcomes_resource')->delete($entity);
}

/**
 * Get the URL to view a Outcome record.
 *
 * @param object $resource
 *   Resource entity
 * @return array
 *   URI array
 */
function lti_tool_provider_outcomes_resource_uri($resource) {
  return array(
    'path' => 'admin/config/lti-tool-provider/outcomes-resource/view/' . $resource->id, 
  );
}
/**
 * Load a Resource Entity.
 *
 * @param int $id
 *   Resource entity id
 * @param boolean $reset
 *   Boolean for reset option
 * @return object
 *   Resource entity
 */
function lti_tool_provider_outcomes_resource_load($id = NULL, $reset = FALSE) {
  $ids = (isset($id) ? array($id) : array());
  $obj = lti_tool_provider_outcomes_resource_load_multiple($ids, $reset);
  return $obj ? reset($obj) : FALSE;
}

/**
 * Load mutiple Resource Entities.
 *
 * @param int $ids
 *   Array of ids
 * @param array $conditions
 *   Conditions for loading
 * @param boolean $reset
 *   Boolean for reset option
 * @return array
 *   Array of resource entities
 */
function lti_tool_provider_outcomes_resource_load_multiple($ids = FALSE, $conditions = array(), $reset = FALSE) {
  return entity_load('lti_tool_provider_outcomes_resource', $ids, $conditions, $reset);
}


/**
 * Theme for Grades Mapping Form.
 *
 * @param array $variables
 *   Theme variables
 *
 * @return array
 *   Themed Form
 */
function theme_lti_tool_provider_outcomes_resource_manage_form($variables) {
  $form = $variables['form'];
  $output = '';
  if (isset($_SESSION['lti_tool_provider_context_info'])) {
    $output .= drupal_render($form['title']);
    $output .= drupal_render($form['context']);
    $records = isset($form['records']['#value']) ? $form['records']['#value'] : NULL;
    if (isset($records)) {
      $counter = 1;
      $rows = array();
      foreach ($records as $record) {
        $rows[] = array(
          array('data' => $counter ),
          array('data' => drupal_render($form['row_' . $counter][$record -> lti_tool_provider_outcomes_resource_id . '_title'])),
          array('data' => drupal_render($form['row_' . $counter][$record -> lti_tool_provider_outcomes_resource_id . '_datatype_select']) ),
          array('data' => drupal_render($form['row_' . $counter][$record -> lti_tool_provider_outcomes_resource_id . '_data_created']) ),
          array('data' => drupal_render($form['row_' . $counter][$record -> lti_tool_provider_outcomes_resource_id . '_operations']) ),
        );
        $a = drupal_render($form['row_' . $counter][$record -> lti_tool_provider_outcomes_resource_id . '_datatype_container_start']);
        $b = drupal_render($form['row_' . $counter][$record -> lti_tool_provider_outcomes_resource_id . '_datatype_select']);
        $c = drupal_render($form['row_' . $counter][$record -> lti_tool_provider_outcomes_resource_id . '_datatype_container_end']);
        dpm($a, 'a' );
        dpm($b, 'b' );
        dpm($c, 'c' );
        $counter ++;
      }
      $header = array(
        t('No'),
        t('Resource Title'),
        t('Score Datatype'),
        t('Date Created'),
        t('Operations'),
      );
      $output .= theme('table', array('header' => $header, 'rows' => $rows));
    }
    else {
      $output .= drupal_render($form['message']);
    }
  }
  else {
    $output .= drupal_render($form['message']);
  }

  $output .= drupal_render_children($form);
  return $output;
}
/**
 * Submit handler for the Resource form.
 *
 * @param array $form
 *   Form array.
 * @param array $form_state
 *   Form state array.
 */
function lti_tool_provider_outcomes_resource_manage_form_validate($form, &$form_state) {
  
}
